<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶„ì‹¤ë¬¼</title>
    <script>
        function sortByLatest() {
            let postsContainer = document.querySelector('.posts');
            let posts = Array.from(postsContainer.querySelectorAll('.post'));

            posts.sort((a, b) => {
                let dateA = new Date(a.querySelector('.post-info p:nth-child(3)').textContent.replace('ì‘ì„±ì¼ì: ', ''));
                let dateB = new Date(b.querySelector('.post-info p:nth-child(3)').textContent.replace('ì‘ì„±ì¼ì: ', ''));
                return dateB - dateA;
            });

            posts.forEach(post => postsContainer.appendChild(post));

            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
            document.getElementById('latestBtn').classList.add('active');
            document.getElementById('oldestBtn').classList.remove('active');
        }

        function sortByOldest() {
            let postsContainer = document.querySelector('.posts');
            let posts = Array.from(postsContainer.querySelectorAll('.post'));

            posts.sort((a, b) => {
                let dateA = new Date(a.querySelector('.post-info p:nth-child(3)').textContent.replace('ì‘ì„±ì¼ì: ', ''));
                let dateB = new Date(b.querySelector('.post-info p:nth-child(3)').textContent.replace('ì‘ì„±ì¼ì: ', ''));
                return dateA - dateB;
            });

            posts.forEach(post => postsContainer.appendChild(post));

            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
            document.getElementById('latestBtn').classList.remove('active');
            document.getElementById('oldestBtn').classList.add('active');
        }
    </script>
    <link rel="stylesheet" href="/css/searchli.css">
</head>

<body>
    <header>
        <h2>ìƒì–´ë²„ë ¸ë‚˜ìš”? (ë¶„ì‹¤ë¬¼)</h2>
        <a href="main"><img src="/img/logo/ë¡œê³ .png" alt="ë¡œê³ " id="logo" style="width: 100px"></a>
    </header>
    <div class="container">
        <div class="buttons">
            <button id="latestBtn" onclick="sortByLatest()" class="active">ìµœì‹ ìˆœ</button>
            <button id="oldestBtn" onclick="sortByOldest()">ì˜¤ë˜ëœìˆœ</button>
        </div>
        <div class="search-bar">
            <form action="/searchli" method="get">
                <input type="text" name="keyword" placeholder="ì œëª© ê²€ìƒ‰">
                <button type="submit">ê²€ìƒ‰</button>
            </form>
        </div>

        <!-- ê²€ìƒ‰ ê²°ê³¼ ì„¹ì…˜ -->
        <section th:if="${keyword != null}">
            <h2>ê²€ìƒ‰ ê²°ê³¼</h2>
            <p class="search-word">ê²€ìƒ‰ì–´: <span th:text="${keyword}"></span></p>
            <div class="posts" th:if="${not #lists.isEmpty(posts)}">
                <div class="post" th:each="post : ${posts}">
                    <a th:href="@{/detail(seq=${post.seq})}" style="text-decoration: none;">
                        <img th:src="${post.itemImage}" alt="ì²¨ë¶€ ì´ë¯¸ì§€">
                        <div class="post-info">
                            <p th:text="${post.title}"></p>
                            <p th:text="${post.id}"></p>
                            <p th:text="${post.location1}"></p>
                            <p th:text="'ì‘ì„±ì¼ì: ' + ${post.regDt}"></p>
                            <p th:text="|ì¡°íšŒìˆ˜ ${post.cnt}|"></p>
                            <p th:if="${post.find} == '0'" th:text="'ì°¾ëŠ”ì¤‘ğŸ˜­'"></p>
                            <p th:if="${post.find} == '1'" th:text="'ì°¾ê¸°ì™„ë£ŒğŸ˜'"></p>
                        </div>
                    </a>
                </div>
            </div>
            <div th:if="${#lists.isEmpty(posts)}">
                <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            </div>
        </section>

        <section th:if="${keyword == null}">
            <div class="posts" th:if="${userfiposts}">
                <div class="post" th:each="post : ${userfiposts}">
                    <a th:href="@{/detail(seq=${post.seq})}" style="text-decoration: none;">
                        <img th:src="${post.itemImage}" alt="ì²¨ë¶€ ì´ë¯¸ì§€">
                        <div class="post-info">
                            <p th:text="${post.title}"></p>
                            <p th:text="${post.id}"></p>
                            <p th:text="${post.location1}"></p>
                            <p th:text="'ì‘ì„±ì¼ì: ' + ${post.regDt}"></p>
                            <p th:text="|ì¡°íšŒìˆ˜ ${post.cnt}|"></p>
                            <p th:if="${post.find} == '0'" th:text="'ì°¾ëŠ”ì¤‘ğŸ˜­'"></p>
                            <p th:if="${post.find} == '1'" th:text="'ì°¾ê¸°ì™„ë£ŒğŸ˜'"></p>
                        </div>
                    </a>
                </div>
            </div>
        </section>
    </div>
    <footer>
        <p>&copy; 2024 Lucky PYNK Lost-and-found things. All rights reserved.</p>
    </footer>
</body>

</html>